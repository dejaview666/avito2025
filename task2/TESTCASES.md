
# Тест-кейсы для API микросервиса

Тестируются следующие сценарии:

- Создание объявления
- Получение объявления по ID
- Получение всех объявлений продавца
- Получение статистики объявления
- Удаление объявления

## 1. test_create_ad
**Описание**: Создает новое объявление и проверяет, что оно создано корректно

**Предусловие**: Наличие доступа к API и возможность отправлять POST-запросы

**Шаги**:
1. Отправить POST-запрос на `/api/1/item` с валидными данными для создания объявления:
   ```json
   {
     "sellerID": 123456,
     "name": "Новый iPhone",
     "price": 99999,
     "statistics": {
       "likes": 0,
       "viewCount": 0,
       "contacts": 0
     }
   }
   ```
2. Проверить, что статус ответа — 200.
3. Проверить, что в ответе присутствует поле "status" со значением "Сохранили объявление".

**Ожидаемый результат**:
Объявление должно быть успешно создано, и в ответе должно содержаться сообщение о сохранении объявления.

---

## 2. test_get_ad_by_id
**Описание**: Получает объявление по ID и проверяет, что оно существует

**Предусловие**: Объявление создано с помощью теста `test_create_ad`

**Шаги**:
1. Получить ID созданного объявления.
2. Отправить GET-запрос на `/api/1/item/{ad_id}`.
3. Проверить, что статус ответа — 200.
4. Проверить, что в ответе содержится информация о данном объявлении.

**Ожидаемый результат**:
Объявление должно быть возвращено с полями, соответствующими созданному объявлению, включая цену и описание.

---

## 3. test_get_nonexistent_ad
**Описание**: Проверка получения несуществующего объявления

**Шаги**:
1. Отправить GET-запрос на `/api/1/item/{random_id}`, где `random_id` — случайный или несуществующий ID.
2. Проверить, что статус ответа — 404.

**Ожидаемый результат**:
API должно вернуть ошибку 404, так как объявление с таким ID не существует.

---

## 4. test_get_ads_by_seller
**Описание**: Получает все объявления продавца и проверяет их наличие

**Предусловие**: Объявление создано с помощью теста `test_create_ad`

**Шаги**:
1. Получить `sellerID` из ответа теста `test_create_ad`.
2. Отправить GET-запрос на `/api/1/{seller_id}/item` с полученным `sellerID`.
3. Проверить, что статус ответа — 200.
4. Проверить, что в ответе содержится список объявлений, соответствующих продавцу.

**Ожидаемый результат**:
Список всех объявлений данного продавца должен быть возвращён, и он должен включать объявление, которое было создано в тесте.

---

## 5. test_get_ad_statistics
**Описание**: Получает статистику объявления по ID и проверяет корректность данных

**Предусловие**: Объявление создано с помощью теста `test_create_ad`

**Шаги**:
1. Получить ID созданного объявления.
2. Отправить GET-запрос на `/api/1/statistic/{ad_id}`.
3. Проверить, что статус ответа — 200.
4. Проверить, что в ответе содержится статистика, включая "likes", "viewCount" и "contacts".

**Ожидаемый результат**:
Ответ должен содержать данные статистики с полями "likes", "viewCount" и "contacts".

---

## 6. test_delete_ad
**Описание**: Удаляет объявление и проверяет, что оно больше не доступно

**Предусловие**: Объявление создано с помощью теста `test_create_ad`

**Шаги**:
1. Получить ID созданного объявления.
2. Отправить DELETE-запрос на `/api/2/item/{ad_id}` для удаления объявления.
3. Проверить, что статус ответа — 200.
4. Отправить GET-запрос на `/api/1/item/{ad_id}` и проверить, что статус ответа — 404.

**Ожидаемый результат**:
Объявление должно быть удалено, и попытка получить его снова должна вернуть ошибку 404.
